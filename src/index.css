:root {
  color-scheme: dark;
  font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  line-height: 1.35;
  font-weight: 450;
  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;

  --glass-bg: rgba(255, 255, 255, 0.08);
  --glass-border: rgba(255, 255, 255, 0.18);
  --glass-shadow: 0 16px 48px rgba(0, 0, 0, 0.24);
  --text: rgba(255, 255, 255, 0.92);
  --muted: rgba(255, 255, 255, 0.72);
}

html,
body {
  height: 100%;
}

body {
  margin: 0;
  min-width: 320px;
  background: radial-gradient(1200px 700px at 35% 20%, rgba(80, 165, 255, 0.12), transparent 60%),
    radial-gradient(900px 550px at 75% 70%, rgba(190, 120, 255, 0.11), transparent 55%),
    #05060a;
  color: var(--text);
  overflow: hidden;
}

* {
  box-sizing: border-box;
}

.app {
  position: relative;
  width: 100vw;
  height: 100vh;
}

.scene {
  position: absolute !important;
  inset: 0;
  pointer-events: none;
}

.ui {
  position: absolute;
  inset: 0;
  padding: 22px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.glass {
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  box-shadow: var(--glass-shadow);
  backdrop-filter: blur(40px) saturate(1.35);
  -webkit-backdrop-filter: blur(40px) saturate(1.35);
}

.topBar {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 16px;
}

.topBarLeft {
  display: flex;
  gap: 12px;
  align-items: center;
}

.topBarRight {
  display: flex;
  gap: 12px;
  align-items: center;
}

.judgeCard {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 14px;
  border-radius: 24px;
}

.judgeAvatar {
  width: 38px;
  height: 38px;
  border-radius: 999px;
  background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.85), rgba(170, 220, 255, 0.25), rgba(120, 90, 255, 0.12));
  box-shadow: 0 0 24px rgba(154, 215, 255, 0.24);
}

.judgeName {
  font-weight: 700;
  letter-spacing: 0.02em;
}

.judgeSub {
  margin-top: 2px;
  font-size: 12px;
  color: var(--muted);
}

.pill {
  border-radius: 48px;
  padding: 10px 14px;
  min-height: 54px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 4px;
}

.pillLabel {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.72);
  letter-spacing: 0.06em;
}

.pillValue {
  font-size: 18px;
  font-weight: 740;
}

.pillGuiltMain {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.pillGuilt.danger {
  color: #ff3b30;
}
.pillGuilt.warn {
  color: #ff9f0a;
}
.pillGuilt.safe {
  color: #34c759;
}

.ring {
  transform: rotate(-90deg);
}
.ringBg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.18);
  stroke-width: 4.5;
}
.ringFg {
  fill: none;
  stroke: currentColor;
  stroke-width: 4.5;
  stroke-linecap: round;
  transition: stroke-dashoffset 240ms ease;
}

.btn {
  border: 1px solid rgba(255, 255, 255, 0.18);
  border-radius: 16px;
  padding: 10px 12px;
  background: transparent;
  color: var(--text);
  cursor: pointer;
  font: inherit;
}

.btn:disabled {
  opacity: 0.55;
  cursor: not-allowed;
}

.glassBtn {
  background: rgba(255, 255, 255, 0.07);
}

.main {
  flex: 1;
  display: flex;
  justify-content: center;
  align-items: stretch;
  overflow: hidden;
}

.board {
  width: min(1100px, 100%);
  border-radius: 28px;
  padding: 18px;
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.boardHeader {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 12px;
}

.boardTitle {
  font-weight: 760;
  letter-spacing: 0.02em;
}

.boardSub {
  margin-top: 4px;
  font-size: 12px;
  color: var(--muted);
}

.boardActions {
  display: flex;
  gap: 10px;
  align-items: center;
}

.finalizeBtn:enabled {
  border-color: rgba(52, 199, 89, 0.45);
  box-shadow: 0 10px 30px rgba(52, 199, 89, 0.12);
}

.submitBtn {
  border-radius: 20px;
  padding: 12px 16px;
  border: 1px solid rgba(255, 255, 255, 0.22);
  background: radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.18), rgba(255, 59, 48, 0.92));
  box-shadow: 0 14px 40px rgba(255, 59, 48, 0.18);
}

.submitBtn:disabled {
  background: rgba(255, 255, 255, 0.06);
  box-shadow: none;
}

.boardGrid {
  flex: 1;
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 12px;
  overflow: auto;
  padding-right: 4px;
}

@media (max-width: 980px) {
  .boardGrid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

@media (max-width: 640px) {
  .ui {
    padding: 14px;
  }
  .boardGrid {
    grid-template-columns: 1fr;
  }
  .topBarRight {
    gap: 8px;
  }
}

.evidenceCard {
  appearance: none;
  text-align: left;
  padding: 14px;
  border-radius: 24px;
  background: rgba(255, 255, 255, 0.07);
  color: inherit;
  border: 1px solid rgba(255, 255, 255, 0.12);
  cursor: pointer;
  transition:
    transform 160ms ease,
    box-shadow 160ms ease,
    border-color 160ms ease;
}

.evidenceCard:hover {
  transform: translateY(-2px);
  border-color: rgba(184, 236, 255, 0.28);
  box-shadow: 0 18px 48px rgba(0, 0, 0, 0.28);
}

.evidenceCard.selected {
  border-color: rgba(184, 236, 255, 0.58);
  box-shadow:
    0 18px 48px rgba(0, 0, 0, 0.28),
    0 0 0 2px rgba(184, 236, 255, 0.18);
}

.evidenceTop {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.evidenceType {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.72);
}

.evidencePolarity {
  font-size: 12px;
  padding: 2px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.14);
  background: rgba(255, 255, 255, 0.06);
}
.evidencePolarity.exculpatory {
  color: #34c759;
  border-color: rgba(52, 199, 89, 0.25);
}
.evidencePolarity.inculpatory {
  color: #ff453a;
  border-color: rgba(255, 69, 58, 0.25);
}
.evidencePolarity.neutral {
  color: rgba(255, 255, 255, 0.78);
}

.evidenceTitle {
  margin-top: 10px;
  font-weight: 760;
}

.evidenceSummary {
  margin-top: 6px;
  font-size: 13px;
  color: rgba(255, 255, 255, 0.86);
  line-height: 1.35;
}

.evidenceMeta {
  margin-top: 10px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 10px;
  font-size: 12px;
  color: rgba(255, 255, 255, 0.72);
}

.evidenceDelta.down {
  color: #34c759;
}
.evidenceDelta.up {
  color: #ff453a;
}
.evidenceDelta.flat {
  color: rgba(255, 255, 255, 0.7);
}

.evidenceNote {
  margin-top: 10px;
  font-size: 12px;
  color: rgba(255, 255, 255, 0.74);
  border-left: 2px solid rgba(255, 255, 255, 0.16);
  padding-left: 10px;
}

.chatDock {
  position: absolute;
  left: 50%;
  bottom: 18px;
  transform: translateX(-50%);
  width: min(860px, calc(100% - 44px));
  pointer-events: auto;
}

.chatHandle,
.investHandle {
  width: 100%;
  border-radius: 20px;
  padding: 10px 14px;
  color: var(--text);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.chatHandleHint {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.72);
}

.chatDrawer {
  margin-top: 10px;
  border-radius: 24px;
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  height: 310px;
}

.chatMessages {
  flex: 1;
  overflow: auto;
  padding-right: 4px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.chatMsg {
  display: flex;
}
.chatMsg.user {
  justify-content: flex-end;
}
.chatMsg.system {
  justify-content: center;
}

.chatBubble {
  max-width: 86%;
  padding: 10px 12px;
  border-radius: 18px;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.14);
  color: rgba(255, 255, 255, 0.92);
  font-size: 13px;
  line-height: 1.35;
}

.chatMsg.user .chatBubble {
  background: rgba(154, 215, 255, 0.12);
  border-color: rgba(184, 236, 255, 0.22);
}

.chatMsg.system .chatBubble {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(255, 255, 255, 0.12);
  color: rgba(255, 255, 255, 0.8);
}

.chatQuick {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.chip {
  border-radius: 999px;
  padding: 8px 12px;
  border: 1px solid rgba(255, 255, 255, 0.16);
  background: rgba(255, 255, 255, 0.06);
  color: rgba(255, 255, 255, 0.9);
  font-size: 12px;
  cursor: pointer;
}

.chip:disabled {
  opacity: 0.55;
  cursor: not-allowed;
}

.chatInputRow {
  display: flex;
  gap: 10px;
}

.chatInput {
  flex: 1;
  border-radius: 16px;
  border: 1px solid rgba(255, 255, 255, 0.14);
  background: rgba(0, 0, 0, 0.18);
  color: rgba(255, 255, 255, 0.92);
  padding: 10px 12px;
  outline: none;
}

.chatInput::placeholder {
  color: rgba(255, 255, 255, 0.55);
}

.investDock {
  position: absolute;
  left: 18px;
  top: 112px;
  width: 360px;
  pointer-events: auto;
}

.investPanel {
  margin-top: 10px;
  border-radius: 24px;
  padding: 12px;
  height: calc(100vh - 170px);
  display: flex;
  flex-direction: column;
  gap: 12px;
  overflow: hidden;
}

.investTop {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.partnerRow {
  display: flex;
  gap: 12px;
  align-items: center;
}

.partnerAvatar {
  width: 40px;
  height: 40px;
  border-radius: 999px;
  background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.78), rgba(255, 255, 255, 0.08));
  border: 1px solid rgba(255, 255, 255, 0.18);
}

.partnerName {
  font-weight: 720;
}

.partnerSub {
  margin-top: 2px;
  font-size: 12px;
  color: var(--muted);
}

.progressBar {
  height: 10px;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.07);
  border: 1px solid rgba(255, 255, 255, 0.12);
  overflow: hidden;
}

.progressFill {
  height: 100%;
  background: linear-gradient(90deg, rgba(154, 215, 255, 0.8), rgba(190, 120, 255, 0.6));
}

.investList {
  flex: 1;
  overflow: auto;
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding-right: 4px;
}

.investItem {
  border-radius: 20px;
  padding: 12px;
  border: 1px solid rgba(255, 255, 255, 0.12);
  background: rgba(255, 255, 255, 0.05);
}

.investItem.disabled {
  opacity: 0.7;
}

.investItemTop {
  display: flex;
  justify-content: space-between;
  gap: 10px;
  align-items: baseline;
}

.investTitle {
  font-weight: 720;
}

.investTime {
  font-size: 12px;
  color: var(--muted);
}

.investDesc {
  margin-top: 6px;
  font-size: 12px;
  color: rgba(255, 255, 255, 0.78);
  line-height: 1.35;
}

.investBottom {
  margin-top: 10px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.investHint {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.72);
}

.modalBackdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.62);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 22px;
  z-index: 50;
}

.modal {
  width: min(920px, 100%);
  border-radius: 28px;
  padding: 16px;
}

.modalHeader {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 12px;
  padding: 4px 4px 12px 4px;
}

.modalTitle {
  font-weight: 780;
}

.modalSub {
  margin-top: 4px;
  font-size: 12px;
  color: var(--muted);
}

.modalGrid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 12px;
  padding: 4px;
}

.field {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.fieldWide {
  grid-column: 1 / -1;
}

.fieldLabelRow {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  gap: 10px;
}

.fieldLabel {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.78);
}

.fieldInput,
.fieldSelect {
  border-radius: 16px;
  border: 1px solid rgba(255, 255, 255, 0.14);
  background: rgba(0, 0, 0, 0.18);
  color: rgba(255, 255, 255, 0.92);
  padding: 10px 12px;
  outline: none;
}

.fieldSelect {
  cursor: pointer;
}

.modelRow {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

.chipsRow {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin: 6px 0 10px;
}

.fieldError {
  margin-top: 8px;
  font-size: 12px;
  color: #ff453a;
}

.modalFoot {
  padding: 10px 6px 2px;
}

.modalHint {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.72);
}

.endingBackdrop {
  position: fixed;
  inset: 0;
  z-index: 60;
  background: rgba(0, 0, 0, 0.72);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 22px;
}

.endingBackdrop.executed {
  background: radial-gradient(700px 400px at 50% 45%, rgba(255, 59, 48, 0.18), rgba(0, 0, 0, 0.8));
}

.endingCard {
  width: min(720px, 100%);
  border-radius: 28px;
  padding: 18px;
  position: relative;
  overflow: hidden;
}

.endingTitle {
  font-size: 24px;
  font-weight: 820;
}

.endingSummary {
  margin-top: 10px;
  color: rgba(255, 255, 255, 0.82);
}

.endingStats {
  margin-top: 16px;
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
}

.stat {
  border-radius: 18px;
  padding: 12px;
  border: 1px solid rgba(255, 255, 255, 0.14);
  background: rgba(255, 255, 255, 0.06);
}

.statLabel {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.72);
}

.statValue {
  margin-top: 6px;
  font-weight: 820;
  font-size: 18px;
}

.endingActions {
  margin-top: 16px;
  display: flex;
  justify-content: flex-end;
}

.sonic {
  position: absolute;
  inset: -20%;
  background: radial-gradient(circle at 50% 50%, rgba(255, 59, 48, 0.0), rgba(255, 59, 48, 0.12), rgba(0, 0, 0, 0));
  filter: blur(10px);
  animation: sonicPulse 1.2s ease-in-out infinite;
  pointer-events: none;
}

@keyframes sonicPulse {
  0% {
    transform: scale(0.96);
    opacity: 0.45;
  }
  50% {
    transform: scale(1.03);
    opacity: 0.95;
  }
  100% {
    transform: scale(0.96);
    opacity: 0.45;
  }
}
